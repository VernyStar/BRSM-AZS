class Modal{constructor(e){let t={element:null,effect:"zoom",state:"closed",size:"medium",content:null,footer:null,header:null,title:null};this.options=Object.assign(t,e);if(this.options.element==null){this.options.element=document.createElement("div");this.options.element.classList.add("modal");this.options.element.innerHTML=`\n                <div class="container">\n                    <div class="header">\n                        <button class="close">&times;</button> \n                    </div>\n                    <div class="content"></div>\n                    <div class="footer">\n                        <button class="close">Закрити</button>\n                    </div>\n                </div>                        \n            `;document.body.appendChild(this.options.element)}this.options.element.querySelector(".container").classList.remove("zoom","slide");this.options.element.querySelector(".container").classList.add(this.options.effect);if(this.options.header!=null){this.header=this.options.header}if(this.options.content!=null){this.content=this.options.content}if(this.options.footer!=null){this.footer=this.options.footer}if(this.options.title!=null){this.title=this.options.title}this.size=this.options.size;this._eventHandlers()}open(){this.options.state="open";this.options.element.style.display="flex";this.options.element.getBoundingClientRect();this.options.element.classList.add("open");if(this.options.onOpen){this.options.onOpen(this)}}close(){this.options.state="closed";this.options.element.classList.remove("open");this.options.element.style.display="none";if(this.options.onClose){this.options.onClose(this)}}get state(){return this.options.state}get effect(){return this.options.effect}set effect(e){this.options.effect=e;this.options.element.querySelector(".container").classList.remove("zoom","slide");this.options.element.querySelector(".container").classList.add(e)}get size(){return this.options.size}set size(e){this.options.size=e;this.options.element.classList.remove("small","large","medium","full");this.options.element.classList.add(e)}get content(){return this.options.element.querySelector(".content").innerHTML}get contentElement(){return this.options.element.querySelector(".content")}set content(e){if(!e){this.options.element.querySelector(".content").remove()}else{if(!this.options.element.querySelector(".content")){this.options.element.querySelector(".container").insertAdjacentHTML("afterbegin",`<div class="content"></div>`)}this.options.element.querySelector(".content").innerHTML=e}}get header(){return this.options.element.querySelector(".header").innerHTML}get headerElement(){return this.options.element.querySelector(".header")}set header(e){if(!e){this.options.element.querySelector(".header").remove()}else{if(!this.options.element.querySelector(".header")){this.options.element.querySelector(".container").insertAdjacentHTML("afterbegin",`<div class="header"></div>`)}this.options.element.querySelector(".header").innerHTML=e}}get title(){return this.options.element.querySelector(".header .title")?this.options.element.querySelector(".header .title").innerHTML:null}set title(e){if(!this.options.element.querySelector(".header .title")){this.options.element.querySelector(".header").insertAdjacentHTML("afterbegin",`<h1 class="title"></h1>`)}this.options.element.querySelector(".header .title").innerHTML=e}get footer(){return this.options.element.querySelector(".footer").innerHTML}get footerElement(){return this.options.element.querySelector(".footer")}set footer(e){if(!e){this.options.element.querySelector(".footer").remove()}else{if(!this.options.element.querySelector(".footer")){this.options.element.querySelector(".container").insertAdjacentHTML("beforeend",`<div class="footer"></div>`)}this.options.element.querySelector(".footer").innerHTML=e}}_eventHandlers(){this.options.element.querySelectorAll(".close").forEach((e=>{e.onclick=e=>{e.preventDefault();this.close()}}))}static initElements(){document.querySelectorAll("[data-modal]").forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();let o=document.querySelector(e.dataset.modal);let n=new Modal({element:o});for(let e in o.dataset){if(n[e]){n[e]=o.dataset[e]}}n.open()}))}))}static confirm(e,t,o){let n=new Modal({content:e,header:"",footer:'<button class="success">OK</button><button class="cancel alt">Скасувати</button>'});n.footerElement.querySelector(".success").onclick=e=>{e.preventDefault();if(t)t();n.close()};n.footerElement.querySelector(".cancel").onclick=e=>{e.preventDefault();if(o)o();n.close()};n.open()}static alert(e,t){let o=new Modal({content:e,header:"",footer:'<button class="success">OK</button>'});o.footerElement.querySelector(".success").onclick=e=>{e.preventDefault();if(t)t();o.close()};o.open()}static prompt(e,t,o,n){let s=new Modal({header:"",footer:'<button class="success">OK</button><button class="cancel alt">Скасувати</button>'});s.content=e+`<div class="prompt-input"><input type="text" value="${t}" placeholder="Введіть ваш текст..."></div>`;s.footerElement.querySelector(".success").onclick=e=>{e.preventDefault();if(o)o(s.contentElement.querySelector(".prompt-input input").value);s.close()};s.footerElement.querySelector(".cancel").onclick=e=>{e.preventDefault();if(n)n(s.contentElement.querySelector(".prompt-input input").value);s.close()};s.open()}}
